<!-- templates/admin_home.html -->
{% extends 'base.html' %}

{% block content %}
<h2>Welcome, {{ current_user.username }}!</h2>
<h3>Manage Teacher Access</h3>
<form method="POST">
    <label for="teacher_id">Teacher:</label>
    <select id="teacher_id" name="teacher_id">
        {% for teacher in teachers %}
        <option value="{{ teacher.id }}">{{ teacher.username }}</option>
        {% endfor %}
    </select><br>

    <label for="student_id">Student:</label>
    <select id="student_id" name="student_id">
        {% for student in students %}
        <option value="{{ student.id }}">{{ student.username }}</option>
        {% endfor %}
    </select><br>

    <button type="submit" name="action" value="grant">Grant Access</button>
    <button type="submit" name="action" value="revoke">Revoke Access</button>
</form>

<h4>Current Access</h4>
<ul>
    {% for access in access_list %}
        {% if access.access_granted %}
            <li>{{ access.teacher.username }} has access to {{ access.student.username }}</li>
        {% endif %}
    {% else %}
    <li>No access granted yet.</li>
    {% endfor %}
</ul>
{% endblock %}
